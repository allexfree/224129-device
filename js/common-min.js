"use strict";for(var target,map,placeMarker,htmlBlock,storage,ESC_KEYCODE=27,isStorageSupport=!0,empty="",menuDropdown=document.querySelector(".main-menu__dropdown"),linksFocused=menuDropdown.querySelectorAll(".main-menu__dropdown-item a"),mapLink=document.querySelector(".contacts__map"),contactLink=document.querySelector(".contacts__link"),mapModalOverlay=document.querySelector(".map-popup-overlay"),formModalOverlay=document.querySelector(".form-popup-overlay"),contactForm=formModalOverlay.querySelector(".popup-form"),inputUserName=formModalOverlay.querySelector("#name-user"),inputUserMail=formModalOverlay.querySelector("#mail-user"),formUserText=formModalOverlay.querySelector("#text-user"),formSubmitBtn=formModalOverlay.querySelector(".popup-form__btn"),btnCloseMap=mapModalOverlay.querySelector(".close-btn"),btnCloseForm=formModalOverlay.querySelector(".close-btn"),i=0;i<linksFocused.length;i++)linksFocused[i].onfocus=function(){menuDropdown.setAttribute("style","visibility: visible; opacity: 1")},linksFocused[i].onblur=function(){menuDropdown.setAttribute("style","")};try{storage=localStorage.getItem("userMail")}catch(e){isStorageSupport=!1}var isInputFocused=function(){isStorageTrue(),inputUserName.onfocus=function(){inputUserName.setAttribute("style","")},inputUserMail.onfocus=function(){inputUserMail.setAttribute("style","")}},isStorageTrue=function(){isStorageSupport&&localStorage.setItem("userMail",inputUserMail.value)},mapLinkClickHandler=function(e){e.preventDefault(),mapModalOverlay.classList.remove("hidden")},contactLinkClickHandler=function(e){e.preventDefault(),formModalOverlay.classList.remove("hidden"),storage?(inputUserMail.value=storage,inputUserName.focus()):inputUserMail.focus()},btnCloseClickHandler=function(){mapModalOverlay.classList.add("hidden"),mapModalOverlay.removeAttribute("style"),formModalOverlay.classList.add("hidden"),formModalOverlay.removeAttribute("style"),inputUserName.removeAttribute("style"),inputUserName.value="",inputUserMail.removeAttribute("style"),inputUserMail.value="",contactForm.classList.remove("popup-error")},escPressHandler=function(e){e.keyCode===ESC_KEYCODE&&e.target!==inputUserName&&e.target!==inputUserMail&&e.target!==formUserText&&(mapModalOverlay.classList.add("hidden"),formModalOverlay.classList.add("hidden"),inputUserName.removeAttribute("style"),inputUserName.value="",inputUserMail.removeAttribute("style"),inputUserMail.value="",contactForm.classList.remove("popup-error"))},btnSubmitClickHandler=function(e){if(isInputFocused(),inputUserName.value===empty||inputUserMail.value===empty){if(e.preventDefault(),contactForm.classList.remove("popup-error"),contactForm.offsetWidth,contactForm.classList.add("popup-error"),inputUserName.value===empty)return void inputUserName.setAttribute("style","background-color: #f6dada; outline: none");if(inputUserMail.value===empty)return void inputUserMail.setAttribute("style","background-color: #f6dada; outline: none")}};function init(){(map=new ymaps.Map("ya-map",{center:[55.68697956906804,37.52965449999998],zoom:17,controls:[]})).behaviors.disable("scrollZoom"),map.controls.add("zoomControl",{position:{top:185,right:35}}),placeMarker=new ymaps.Placemark([55.68697956906804,37.52965449999998],{baloonContent:htmlBlock},{iconLayout:"default#image",iconImageHref:"img/map-pointer.svg",iconImageSize:[100,100],iconImageOffset:[-45,-90]}),map.geoObjects.add(placeMarker)}mapLink.addEventListener("click",mapLinkClickHandler),contactLink.addEventListener("click",contactLinkClickHandler),contactForm.addEventListener("submit",btnSubmitClickHandler),btnCloseMap.addEventListener("click",btnCloseClickHandler),btnCloseForm.addEventListener("click",btnCloseClickHandler),document.addEventListener("keydown",escPressHandler),ymaps.ready(init);
